# Chapter 13

## 复制构造函数

复制构造函数是一种特殊的构造函数，具有单个形参，该形参是对对象的引用。

复制构造函数用于：
+ 根据同一类型的对象显式或隐式初始化另一个对象
+ 复制一个对象，将它作为实参传递给一个函数
+ 从函数返回时复制一个对象
+ 初始化顺序容器中的元素
+ 根据元素初始化列表初始化数组元素

C++支持两种初始化形式，直接初始化和间接初始化。

对于类类型对象，直接初始化调用构造函数，复制初始化调用复制构造函数


### 合成复制构造函数

如果没有定义复制构造函数，编译器会创建一个

合成复制构造函数，执行逐个成员初始化，创建新对象为旧对象的副本。

### 定义复制构造函数

就是接受单个类类型引用形参的构造函数

``` c++
class Foo{
public:
	Foo();
	Foo(const Foo&);
}
```

### 禁止复制

声明一个private的复制构造函数，但不进行定义

## 赋值操作符

如果没有定义，则编译器会合成一个。

### 重载操作符

重载操作符是一些函数，名称为operator后面跟着要定义的符号，
与其他函数一样，也有形参表和返回值。

如果是二元运算，则有两个形参。

``` c++
class Foo{
public:
	Foo& operator=(const Foo&);
}
```

## 析构函数

析构函数完成资源的回收

撤销类对象时，会自动调用析构函数

### 合成析构函数

编译器总是合成一个析构函数

析构函数逆序撤销类中的每个成员,对每个成员，调用该成员的析构函数来撤销对象。

析构函数是一个成员函数，没有返回值，没有形参。

``` c++
class Foo{
public:
	~Foo(){};
}
```

## 指针

管理指针成员
1. 采取常规指针行为
2. 智能指针
3. 类采取值型行为

### 智能指针

复制对象时，副本和原对象指向同一基础对象。如果通过一个副本改变基础对象，则另一个对象的值也会改变。

#### 引用计数

通过计数器来跟踪有多少个对象共享一个指针，当计数为0时，销毁对象。



